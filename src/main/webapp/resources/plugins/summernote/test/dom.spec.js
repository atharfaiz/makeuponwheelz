var dom=$.fn.summernoteInner().dom,func=$.fn.summernoteInner().func;test("dom.ancestor",function(){var i,s,e;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),e=s[0].firstChild,equal(dom.ancestor(e,dom.isB),s[0],"find ancestor B"),equal(dom.ancestor(e,dom.isDiv),i[0],"find ancestor DIV"),equal(dom.ancestor(e,dom.isU),null,"find ancestor U: null")}),test("dom.listAncestor",function(){var i,s,e,t,d;i=$("<div><i><s><u><b>b</b></u></s></i></div>"),s=i.find("b"),e=i.find("u"),t=i.find("s"),d=i.find("i"),deepEqual(dom.listAncestor(s[0],function(i){return i===d[0]}),[s[0],e[0],t[0],d[0]],"listAncestor from b to i"),deepEqual(dom.listAncestor(e[0],function(i){return i===t[0]}),[e[0],t[0]],"listAncestor from u to s")}),test("dom.commonAncestor",function(){var i,s;i=$("<div><span><b>b</b><u>u</u></span><span><s>s</s><i>i</i></span></div>"),$span=i.find("span"),s=i.find("b"),$u=i.find("u"),$s=i.find("s"),$i=i.find("i"),equal(dom.commonAncestor(s[0],$u[0]),$span[0],"common(b, u) => span"),equal(dom.commonAncestor(s[0],$s[0]),i[0],"common(b, s) => div")}),test("dom.listBetween",function(){var i,s,e,t,d;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),e=i.find("u"),t=i.find("s"),d=i.find("i"),deepEqual(dom.listBetween(s[0],s[0]),[s[0]],"same elements"),deepEqual(dom.listBetween(s[0],e[0]),[s[0],s[0].firstChild,e[0]],"adjacent"),deepEqual(dom.listBetween(s[0],t[0]),[s[0],s[0].firstChild,e[0],e[0].firstChild,t[0]],"distance 2")}),test("dom.listNext",function(){var i,s,e,t,d;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),e=i.find("u"),t=i.find("s"),d=i.find("i"),deepEqual(dom.listNext(e[0]),[e[0],t[0],d[0]],"with no pred"),deepEqual(dom.listNext(d[0]),[d[0]],"last item with no pred"),deepEqual(dom.listNext(t[0],func.eq(d[0])),[t[0],d[0]],"s to i")}),test("dom.listPrev",function(){var i,s,e,t,d;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),e=i.find("u"),t=i.find("s"),d=i.find("i"),deepEqual(dom.listPrev(t[0]),[t[0],e[0],s[0]],"with no pred"),deepEqual(dom.listPrev(s[0]),[s[0]],"first item with no pred"),deepEqual(dom.listPrev(d[0],func.eq(t[0])),[d[0],t[0]],"i to s")}),test("dom.position",function(){var i,s,e,t,d;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),e=i.find("u"),t=i.find("s"),d=i.find("i"),equal(dom.position(s[0]),0,"should b return zero"),equal(dom.position(e[0]),1,"should u return one"),equal(dom.position(t[0]),2,"should s return three"),equal(dom.position(d[0]),3,"should i return four"),equal(dom.position(s[0].firstChild),0,"should text in b return zero")}),test("dom.makeOffsetPath",function(){var i,s,e,t,d;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),e=i.find("u"),t=i.find("s"),d=i.find("i"),deepEqual(dom.makeOffsetPath(i[0],i[0]),[],"should return empty list"),deepEqual(dom.makeOffsetPath(i[0],s[0]),[0],"should return [0]"),deepEqual(dom.makeOffsetPath(i[0],s[0].firstChild),[0,0],"should return [0, 0]"),deepEqual(dom.makeOffsetPath(i[0],e[0]),[1],"shuold return [1]"),deepEqual(dom.makeOffsetPath(i[0],e[0].firstChild),[1,0],"shuold return [1, 0]"),deepEqual(dom.makeOffsetPath(i[0],t[0]),[2],"shuold return [2]"),deepEqual(dom.makeOffsetPath(i[0],t[0].firstChild),[2,0],"shuold return [2, 0]"),deepEqual(dom.makeOffsetPath(i[0],d[0]),[3],"shuold return [3]"),deepEqual(dom.makeOffsetPath(i[0],d[0].firstChild),[3,0],"shuold return [3, 0]")}),test("dom.fromOffsetPath",function(){var i,s,e,t,d;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),e=i.find("u"),t=i.find("s"),d=i.find("i");var u=i[0];$.each([s[0],e[0],t[0],d[0]],function(i,s){equal(dom.fromOffsetPath(u,dom.makeOffsetPath(u,s)),s);var e=s.firstChild;equal(dom.fromOffsetPath(u,dom.makeOffsetPath(u,e)),e)})});var equalsToUpperCase=function(i,s,e){ok(i.toUpperCase()==s.toUpperCase(),e)};test("dom.split",function(){var i,s,e,t,d;i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),e=i.find("u"),dom.split(i[0],e[0],0),equalsToUpperCase(i.html(),"<b>b</b>","splitBy u tag with offset 0"),equalsToUpperCase(i.next().html(),"<u>u</u><s>s</s><i>i</i>","right hand side"),i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),e=i.find("u"),dom.split(i[0],e[0],1),equalsToUpperCase(i.html(),"<b>b</b><u>u</u>","splitBy u tag with offset 1"),equalsToUpperCase(i.next().html(),"<s>s</s><i>i</i>","right hand side"),i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),s=i.find("b"),dom.split(i[0],s[0],0),equalsToUpperCase(i.html(),"","splitBy b tag with offset 0 (left edge case)"),equalsToUpperCase(i.next().html(),"<b>b</b><u>u</u><s>s</s><i>i</i>","right hand side"),i=$("<div><b>b</b><u>u</u><s>s</s><i>i</i></div>"),d=i.find("i"),dom.split(i[0],d[0],1),equalsToUpperCase(i.html(),"<b>b</b><u>u</u><s>s</s><i>i</i>","splitBy i tag with offset 1 (right edge case)"),equalsToUpperCase(i.next().html(),"","right hand side"),i=$("<div><b>b</b><u>u</u><s>strike</s><i>i</i></div>"),t=i.find("s"),dom.split(i[0],t[0].firstChild,3),equalsToUpperCase(i.html(),"<b>b</b><u>u</u><s>str</s>","splitBy s tag with offset 3 (middle case)"),equalsToUpperCase(i.next().html(),"<s>ike</s><i>i</i>","right hand side"),i=$("<div><b>b</b><u>u</u><s>strike</s><i>i</i></div>"),t=i.find("s"),dom.split(i[0],t[0].firstChild,0),equalsToUpperCase(i.html(),"<b>b</b><u>u</u><s></s>","splitBy s tag with offset 0 (left edge case)"),equalsToUpperCase(i.next().html(),"<s>strike</s><i>i</i>","right hand side"),i=$("<div><b>b</b><u>u</u><s>strike</s><i>i</i></div>"),t=i.find("s"),dom.split(i[0],t[0].firstChild,6),equalsToUpperCase(i.html(),"<b>b</b><u>u</u><s>strike</s>","splitBy s tag with offset 6 (right edge case)"),equalsToUpperCase(i.next().html(),"<s></s><i>i</i>","right hand side"),i=$("<div><b>b</b><u>u</u><s>strike</s><i>i</i></div>"),t=i.find("s"),dom.split(t[0],t[0].firstChild,3),equalsToUpperCase(i.html(),"<b>b</b><u>u</u><s>str</s><s>ike</s><i>i</i>","splitBy s tag with offset 3 (2 depth case)"),i=$("<div><b>b</b><u>u</u><s>strike</s><i>i</i></div>"),t=i.find("s"),dom.split(t[0].firstChild,t[0].firstChild,3),equalsToUpperCase(i.html(),"<b>b</b><u>u</u><s>strike</s><i>i</i>","splitBy s tag with offset 3 (1 depth, textNode case)"),i=$("<div><span><b>b</b><u>u</u><s>s</s><i>i</i></span></div>"),$span=i.find("span"),dom.split($span[0],$span[0],2),equalsToUpperCase(i.html(),"<span><b>b</b><u>u</u></span><span><s>s</s><i>i</i></span>","splitBy span tag with offset 2 (1 depth, element case)")});