!function(t){"use strict";var e=navigator.appVersion.indexOf("Mac")>-1,n=navigator.userAgent.indexOf("MSIE")>-1,a=function(){var t=function(t){return function(e){return t===e}},e=function(t,e){return t===e},n=function(){return!1},a=function(t){return function(){return!t.apply(t,arguments)}},o=function(t){return t};return{eq:t,eq2:e,fail:n,not:a,self:o}}(),o=function(){var t=function(t){return t[0]},e=function(t){return t[t.length-1]},n=function(t){return t.slice(0,t.length-1)},o=function(t){return t.slice(1)},i=function(t,e){return e=e||a.self,t.reduce(function(t,n){return t+e(n)},0)},l=function(t){for(var e=[],n=-1,a=t.length;++n<a;)e[n]=t[n];return e},r=function(n,a){if(0===n.length)return[];var i=o(n);return i.reduce(function(t,n){var o=e(t);return a(e(o),n)?o[o.length]=n:t[t.length]=[n],t},[[t(n)]])},s=function(t){for(var e=[],n=0,a=t.length;a>n;n++)t[n]&&e.push(t[n]);return e};return{head:t,last:e,initial:n,tail:o,sum:i,from:l,compact:s,clusterBy:r}}(),i=function(){var e=function(t){return function(e){return e&&e.nodeName===t}},n=function(t){return t&&/^P|^LI|^H[1-7]/.test(t.nodeName)},i=function(t){return t&&/^UL|^OL/.test(t.nodeName)},l=function(e){return e&&t(e).hasClass("note-editable")},r=function(e){return e&&t(e).hasClass("note-control-sizing")},s=function(t,e){for(;t;){if(e(t))return t;t=t.parentNode}return null},d=function(t,e){e=e||a.fail;var n=[];return s(t,function(t){return n.push(t),e(t)}),n},c=function(e,n){for(var a=d(e),o=n;o;o=o.parentNode)if(t.inArray(o,a)>-1)return o;return null},u=function(t,e){var n=[],a=!1,o=!1,i=function(l){if(l){if(l===t&&(a=!0),a&&!o&&n.push(l),l===e)return void(o=!0);for(var r=0,s=l.childNodes.length;s>r;r++)i(l.childNodes[r])}};return i(c(t,e)),n},f=function(t,e){e=e||a.fail;for(var n=[];t&&(n.push(t),!e(t));)t=t.previousSibling;return n},b=function(t,e){e=e||a.fail;for(var n=[];t&&(n.push(t),!e(t));)t=t.nextSibling;return n},h=function(t,e){var n=e.nextSibling,a=e.parentNode;return n?a.insertBefore(t,n):a.appendChild(t),t},v=function(e,n){return t.each(n,function(t,n){e.appendChild(n)}),e},m=e("#text"),g=function(t){return m(t)?t.nodeValue.length:t.childNodes.length},p=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},y=function(e,n){var i=o.initial(d(n,a.eq(e)));return t.map(i,p).reverse()},k=function(t,e){for(var n=t,a=0,o=e.length;o>a;a++)n=n.childNodes[e[a]];return n},C=function(t,e){if(0===e)return t;if(e>=g(t))return t.nextSibling;if(m(t))return t.splitText(e);var n=t.childNodes[e];return t=h(t.cloneNode(!1),t),v(t,b(n))},x=function(t,e,n){var o=d(e,a.eq(t));return 1===o.length?C(e,n):o.reduce(function(t,a){var o=a.cloneNode(!1);return h(o,a),t===e&&(t=C(t,n)),v(o,b(t)),o})},w=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){for(var a=[],o=0,i=t.childNodes.length;i>o;o++)a.push(t.childNodes[o]);for(var o=0,i=a.length;i>o;o++)n.insertBefore(a[o],t)}n.removeChild(t)}};return{isText:m,isPara:n,isList:i,isEditable:l,isControlSizing:r,isAnchor:e("A"),isDiv:e("DIV"),isSpan:e("SPAN"),isB:e("B"),isU:e("U"),isS:e("S"),isI:e("I"),isImg:e("IMG"),ancestor:s,listAncestor:d,listNext:b,listPrev:f,commonAncestor:c,listBetween:u,insertAfter:h,position:p,makeOffsetPath:y,fromOffsetPath:k,split:x,remove:w}}(),l=function(){var e=!!document.createRange,n=function(t,e){var n,a,l=t.parentElement(),r=document.body.createTextRange(),s=o.from(l.childNodes);for(n=0;n<s.length;n++)if(!i.isText(s[n])){if(r.moveToElementText(s[n]),r.compareEndPoints("StartToStart",t)>=0)break;a=s[n]}if(0!=n&&i.isText(s[n-1])){var d=document.body.createTextRange(),c=null;d.moveToElementText(a||l),d.collapse(!a),c=a?a.nextSibling:l.firstChild;var u=t.duplicate();u.setEndPoint("StartToStart",d);for(var f=u.text.replace(/[\r\n]/g,"").length;f>c.nodeValue.length&&c.nextSibling;)f-=c.nodeValue.length,c=c.nextSibling;{c.nodeValue}e&&c.nextSibling&&i.isText(c.nextSibling)&&f==c.nodeValue.length&&(f-=c.nodeValue.length,c=c.nextSibling),l=c,n=f}return{cont:l,offset:n}},l=function(t){var e=function(t,n){var l,r;if(i.isText(t)){var s=i.listPrev(t,a.not(i.isText)),d=o.last(s).previousSibling;l=d||t.parentNode,n+=o.sum(o.tail(s),i.length),r=!d}else{if(l=t.childNodes[n]||t,i.isText(l))return e(l,n);n=0,r=!1}return{cont:l,collapseToStart:r,offset:n}},n=document.body.createTextRange(),l=e(t.cont,t.offset);return n.moveToElementText(l.cont),n.collapse(l.collapseToStart),n.moveStart("character",l.offset),n},r=function(n,r,s,d){this.sc=n,this.so=r,this.ec=s,this.eo=d;var c=function(){if(e){var t=document.createRange();return t.setStart(n,r),t.setEnd(s,d),t}var a=l({cont:n,offset:r});return a.setEndPoint("EndToEnd",l({cont:s,offset:d})),a};this.select=function(){var t=c();if(e){var n=document.getSelection();n.rangeCount>0&&n.removeAllRanges(),n.addRange(t)}else t.select()},this.listPara=function(){var e=i.listBetween(n,s),l=o.compact(t.map(e,function(t){return i.ancestor(t,i.isPara)}));return t.map(o.clusterBy(l,a.eq2),o.head)};var u=function(t){return function(){var e=i.ancestor(n,t);return e&&e===i.ancestor(s,t)}};this.isOnEditable=u(i.isEditable),this.isOnList=u(i.isList),this.isOnAnchor=u(i.isAnchor),this.isCollapsed=function(){return n===s&&r===d},this.insertNode=function(t){var n=c();e?n.insertNode(t):n.pasteHTML(t.outerHTML)},this.toString=function(){var t=c();return e?t.toString():t.text},this.bookmark=function(t){return{s:{path:i.makeOffsetPath(t,n),offset:r},e:{path:i.makeOffsetPath(t,s),offset:d}}}};return{create:function(t,a,o,i){if(0===arguments.length)if(e){var l=document.getSelection().getRangeAt(0);t=l.startContainer,a=l.startOffset,o=l.endContainer,i=l.endOffset}else{var s=document.selection.createRange(),d=s.duplicate();d.collapse(!1);var c=s;c.collapse(!0);var u=n(c,!0),f=n(d,!1);t=u.cont,a=u.offset,o=f.cont,i=f.offset}else 2===arguments.length&&(o=t,i=a);return new r(t,a,o,i)},createFromBookmark:function(t,e){var n=i.fromOffsetPath(t,e.s.path),a=e.s.offset,o=i.fromOffsetPath(t,e.e.path),l=e.e.offset;return new r(n,a,o,l)}}}(),r=function(){this.stylePara=function(e,n){var a=e.listPara();t.each(a,function(e,a){t.each(n,function(t,e){a.style[t]=e})})},this.current=function(e,n){var a=t(i.isText(e.sc)?e.sc.parentNode:e.sc),o=a.css(["font-size","text-align","list-style-type","line-height"])||{};if(o["font-size"]=parseInt(o["font-size"]),o["font-bold"]=document.queryCommandState("bold")?"bold":"normal",o["font-italic"]=document.queryCommandState("italic")?"italic":"normal",o["font-underline"]=document.queryCommandState("underline")?"underline":"normal",e.isOnList()){var l=["circle","disc","disc-leading-zero","square"],r=t.inArray(o["list-style-type"],l)>-1;o["list-style"]=r?"unordered":"ordered"}else o["list-style"]="none";var s=i.ancestor(e.sc,i.isPara);if(s&&s.style["line-height"])o["line-height"]=s.style.lineHeight;else{var d=parseInt(o["line-height"])/parseInt(o["font-size"]);o["line-height"]=d.toFixed(1)}return o.image=i.isImg(n)&&n,o.anchor=e.isOnAnchor()&&i.ancestor(e.sc,i.isAnchor),o.aAncestor=i.listAncestor(e.sc,i.isEditable),o}},s=function(){var t=[],e=[],n=function(t){var e=t[0],n=l.create();return{contents:t.html(),bookmark:n.bookmark(e),scrollTop:t.scrollTop()}},a=function(t,e){t.html(e.contents).scrollTop(e.scrollTop),l.createFromBookmark(t[0],e.bookmark).select()};this.undo=function(o){var i=n(o);0!==t.length&&(a(o,t.pop()),e.push(i))},this.redo=function(o){var i=n(o);0!==e.length&&(a(o,e.pop()),t.push(i))},this.recordUndo=function(a){e=[],t.push(n(a))}},d=function(){var e=new r;this.currentStyle=function(t){var n=l.create();return n.isOnEditable()&&e.current(n,t)},this.tab=function(e){a(e);var n=l.create(),o=new Array(e.data("tabsize")+1).join("&nbsp;");n.insertNode(t('<span id="noteTab">'+o+"</span>")[0]);var r=t("#noteTab").removeAttr("id");n=l.create(r[0],1),n.select(),i.remove(r[0])},this.undo=function(t){t.data("NoteHistory").undo(t)},this.redo=function(t){t.data("NoteHistory").redo(t)};for(var a=this.recordUndo=function(t){t.data("NoteHistory").recordUndo(t)},o=["bold","italic","underline","strikethrough","justifyLeft","justifyCenter","justifyRight","justifyFull","insertOrderedList","insertUnorderedList","indent","outdent","formatBlock","removeFormat","backColor","foreColor","insertImage","insertHorizontalRule"],s=0,d=o.length;d>s;s++)this[o[s]]=function(t){return function(e,n){a(e),document.execCommand(t,!1,n)}}(o[s]);this.formatBlock=function(t,e){e=n?"<"+e+">":e,document.execCommand("FormatBlock",!1,e)},this.fontSize=function(t,e){a(t),document.execCommand("fontSize",!1,3);var n=t.find("font[size=3]");n.removeAttr("size").css("font-size",e+"px")},this.lineHeight=function(t,n){a(t),e.stylePara(l.create(),{lineHeight:n})},this.unlink=function(t){var e=l.create();if(e.isOnAnchor()){a(t);var n=i.ancestor(e.sc,i.isAnchor);e=l.create(n,0,n,1),e.select(),document.execCommand("unlink")}},this.setLinkDialog=function(e,o){var r=l.create();if(r.isOnAnchor()){var s=i.ancestor(r.sc,i.isAnchor);r=l.create(s,0,s,1)}o({range:r,text:r.toString(),url:r.isOnAnchor()?i.ancestor(r.sc,i.isAnchor).href:""},function(o){r.select(),a(e);var i=-1!==o.toLowerCase().indexOf("://"),s=i?o:"http://"+o;if(n&&r.isCollapsed()){r.insertNode(t('<A id="linkAnchor">'+o+"</A>")[0]);var d=t("#linkAnchor").removeAttr("id").attr("href",s);r=l.create(d[0],0,d[0],1),r.select()}else document.execCommand("createlink",!1,s)})},this.color=function(t,e){var n=JSON.parse(e);a(t),document.execCommand("foreColor",!1,n.foreColor),document.execCommand("backColor",!1,n.backColor)},this.insertTable=function(e,o){a(e);for(var i,r=o.split("x"),s=r[0],d=r[1],c=[],u=n?"&nbsp;":"<br/>",f=0;s>f;f++)c.push("<td>"+u+"</td>");i=c.join("");for(var b,h=[],v=0;d>v;v++)h.push("<tr>"+i+"</tr>");b=h.join("");var m='<table class="table table-bordered">'+b+"</table>";l.create().insertNode(t(m)[0])},this["float"]=function(t,e,n){a(t),n.style.cssFloat=e},this.resize=function(t,e,n){a(t),n.style.width=t.width()*e+"px",n.style.height=""},this.resizeTo=function(t,e){var n=t.y/t.x,a=e.data("ratio");e.css({width:a>n?t.x:t.y/a,height:a>n?t.x*a:t.y})}},c=function(){this.update=function(e,n){var a=function(e,n){e.find(".dropdown-menu li a").each(function(){var e=t(this).attr("data-value")==n;this.className=e?"checked":""})},o=e.find(".note-fontsize");o.find(".note-current-fontsize").html(n["font-size"]),a(o,parseFloat(n["font-size"]));var i=e.find(".note-height");a(i,parseFloat(n["line-height"]));var l=function(t,n){var a=e.find(t);a[n()?"addClass":"removeClass"]("active")};l('button[data-event="bold"]',function(){return"bold"===n["font-bold"]}),l('button[data-event="italic"]',function(){return"italic"===n["font-italic"]}),l('button[data-event="underline"]',function(){return"underline"===n["font-underline"]}),l('button[data-event="justifyLeft"]',function(){return"left"===n["text-align"]||"start"===n["text-align"]}),l('button[data-event="justifyCenter"]',function(){return"center"===n["text-align"]}),l('button[data-event="justifyRight"]',function(){return"right"===n["text-align"]}),l('button[data-event="justifyFull"]',function(){return"justify"===n["text-align"]}),l('button[data-event="insertUnorderedList"]',function(){return"unordered"===n["list-style"]}),l('button[data-event="insertOrderedList"]',function(){return"ordered"===n["list-style"]})},this.updateRecentColor=function(e,n,a){var o=t(e).closest(".note-color"),i=o.find(".note-recent-color"),l=JSON.parse(i.attr("data-value"));l[n]=a,i.attr("data-value",JSON.stringify(l));var r="backColor"===n?"background-color":"color";i.find("i").css(r,a)},this.updateFullscreen=function(t,e){var n=t.find('button[data-event="fullscreen"]');n[e?"addClass":"removeClass"]("active")}},u=function(){var e=function(e,n){var a=t(n),o=a.position(),i=a.height();e.css({display:"block",left:o.left,top:o.top+i})};this.update=function(t,n){var a=t.find(".note-link-popover"),o=t.find(".note-image-popover");if(n.anchor){var i=a.find("a");i.attr("href",n.anchor.href).html(n.anchor.href),e(a,n.anchor)}else a.hide();n.image?e(o,n.image):o.hide()},this.hide=function(t){t.children().hide()}},f=function(){this.update=function(e,n){var a=e.find(".note-control-selection");if(n.image){var o=t(n.image),i=o.position(),l={w:o.width(),h:o.height()};a.css({display:"block",left:i.left,top:i.top,width:l.w,height:l.h}).data("target",n.image);var r=l.w+"x"+l.h;a.find(".note-control-selection-info").text(r)}else a.hide()},this.hide=function(t){t.children().hide()}},b=function(){this.showImageDialog=function(e,n,a){var o=e.find(".note-image-dialog"),i=e.find(".note-dropzone"),l=e.find(".note-image-input");o.on("shown.bs.modal",function(e){i.on("dragenter dragover dragleave",!1),i.on("drop",function(t){n(t),o.modal("hide")}),l.on("change",function(){a(this.files),t(this).val(""),o.modal("hide")})}).on("hidden.bs.modal",function(t){i.off("dragenter dragover dragleave drop"),l.off("change"),o.off("shown.bs.modal hidden.bs.modal")}).modal("show")},this.showLinkDialog=function(t,e,n){var a=t.find(".note-link-dialog"),o=a.find(".note-link-text"),i=a.find(".note-link-url"),l=a.find(".note-link-btn");a.on("shown.bs.modal",function(t){o.html(e.text),i.val(e.url).keyup(function(t){i.val()?l.removeClass("disabled").attr("disabled",!1):l.addClass("disabled").attr("disabled",!0),e.text||o.html(i.val())}).trigger("focus"),l.click(function(t){a.modal("hide"),n(i.val()),t.preventDefault()})}).on("hidden.bs.modal",function(t){i.off("keyup"),l.off("click"),a.off("shown.bs.modal hidden.bs.modal")}).modal("show")},this.showHelpDialog=function(t){t.find(".note-help-dialog").modal("show")}},h=function(){var n=new d,a=new c,o=new u,l=new f,r=new b,s={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLACH:220,RIGHTBRACKET:221},h=function(e){var n=t(e).closest(".note-editor");return{editor:function(){return n},toolbar:function(){return n.find(".note-toolbar")},editable:function(){return n.find(".note-editable")},statusbar:function(){return n.find(".note-statusbar")},popover:function(){return n.find(".note-popover")},handle:function(){return n.find(".note-handle")},dialog:function(){return n.find(".note-dialog")}}},v=function(t){var a=e?t.metaKey:t.ctrlKey,o=t.shiftKey,i=t.keyCode,l=a||o||i===s.TAB,d=l?h(t.target):null;if(i===s.TAB&&d.editable().data("tabsize"))n.tab(d.editable());else if(a&&(o&&i===s.Z||i===s.Y))n.redo(d.editable());else if(a&&i===s.Z)n.undo(d.editable());else if(a&&i===s.B)n.bold(d.editable());else if(a&&i===s.I)n.italic(d.editable());else if(a&&i===s.U)n.underline(d.editable());else if(a&&o&&i===s.S)n.strikethrough(d.editable());else if(a&&i===s.BACKSLACH)n.removeFormat(d.editable());else if(a&&i===s.K)n.setLinkDialog(d.editable(),function(t,e){r.showLinkDialog(d.dialog(),t,e)});else if(a&&i===s.SLASH)r.showHelpDialog(d.dialog());else if(a&&o&&i===s.L)n.justifyLeft(d.editable());else if(a&&o&&i===s.E)n.justifyCenter(d.editable());else if(a&&o&&i===s.R)n.justifyRight(d.editable());else if(a&&o&&i===s.J)n.justifyFull(d.editable());else if(a&&o&&i===s.NUM7)n.insertUnorderedList(d.editable());else if(a&&o&&i===s.NUM8)n.insertOrderedList(d.editable());else if(a&&i===s.LEFTBRACKET)n.outdent(d.editable());else if(a&&i===s.RIGHTBRACKET)n.indent(d.editable());else if(a&&i===s.NUM0)n.formatBlock(d.editable(),"P");else if(a&&s.NUM1<=i&&i<=s.NUM6){var c="H"+String.fromCharCode(i);n.formatBlock(d.editable(),c)}else{if(!a||i!==s.ENTER)return void((i===s.BACKSPACE||i===s.ENTER||i===s.SPACE)&&n.recordUndo(h(t.target).editable()));n.insertHorizontalRule(d.editable())}t.preventDefault()},m=function(e,a){e.trigger("focus"),t.each(a,function(t,a){var o=new FileReader;o.onload=function(t){n.insertImage(e,t.target.result)},o.readAsDataURL(a)})},g=function(t){var e=t.originalEvent.dataTransfer;if(e&&e.files){var n=h(t.currentTarget||t.target);m(n.editable(),e.files)}t.stopPropagation(),t.preventDefault()},p=function(t){i.isImg(t.target)&&t.preventDefault()},y=function(t){var e=h(t.currentTarget||t.target),i=n.currentStyle(t.target);i&&(a.update(e.toolbar(),i),o.update(e.popover(),i),l.update(e.handle(),i))},k=function(t){var e=h(t.currentTarget||t.target);o.hide(e.popover()),l.hide(e.handle())},C=function(e){if(i.isControlSizing(e.target)){var a,r=h(e.target),s=r.handle(),d=r.popover(),c=r.editable(),u=r.editor(),f=s.find(".note-control-selection").data("target"),b=t(f),v=b.offset(),m=t(document).scrollTop();u.on("mousemove",function(t){a={x:t.clientX-v.left,y:t.clientY-(v.top-m)},n.resizeTo(a,b),l.update(s,{image:f}),o.update(d,{image:f})}).on("mouseup",function(){u.off("mousemove").off("mouseup")}),b.data("ratio")||b.data("ratio",b.height()/b.width()),n.recordUndo(c),e.stopPropagation(),e.preventDefault()}},x=function(e){var n=t(e.target).closest("[data-event]");n.length>0&&e.preventDefault()},w=function(e){var o=t(e.target).closest("[data-event]");if(o.length>0){var i,l=o.attr("data-event"),s=o.attr("data-value"),d=h(e.target),c=d.dialog(),u=d.editable();if(-1!==t.inArray(l,["resize","float"])){var f=d.handle(),b=f.find(".note-control-selection");i=b.data("target")}if(n[l]&&(u.trigger("focus"),n[l](u,s,i)),-1!==t.inArray(l,["backColor","foreColor"]))a.updateRecentColor(o[0],l,s);else if("showLinkDialog"===l)n.setLinkDialog(u,function(t,e){r.showLinkDialog(c,t,e)});else if("showImageDialog"===l)r.showImageDialog(c,g,function(t){m(u,t)});else if("showHelpDialog"===l)r.showHelpDialog(c);else if("fullscreen"===l){var v=d.editor();v.toggleClass("fullscreen");var p=d.toolbar(),k=function(){var e=t(window).height()-p.outerHeight();u.css("height",e)},C=v.hasClass("fullscreen");C?(u.data("orgHeight",u.css("height")),t(window).resize(k).trigger("resize")):(u.css("height",u.data("orgHeight")),t(window).off("resize")),a.updateFullscreen(p,C)}y(e)}},F=24,A=function(e){var n=t(document),a=h(e.target).editable(),o=a.offset().top-n.scrollTop(),i=function(t){a.height(t.clientY-(o+F))},l=function(){n.unbind("mousemove",i).unbind("mouseup",l)};n.mousemove(i).mouseup(l),e.stopPropagation(),e.preventDefault()},S=18,E=function(e){var n,a=t(e.target.parentNode),o=a.next(),i=a.find(".note-dimension-picker-mousecatcher"),l=a.find(".note-dimension-picker-highlighted"),r=a.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var s=t(e.target).offset();n={x:e.pageX-s.left,y:e.pageY-s.top}}else n={x:e.offsetX,y:e.offsetY};var d={c:Math.ceil(n.x/S)||1,r:Math.ceil(n.y/S)||1};l.css({width:d.c+"em",height:d.r+"em"}),i.attr("data-value",d.c+"x"+d.r),3<d.c&&d.c<10&&r.css({width:d.c+1+"em"}),3<d.r&&d.r<10&&r.css({height:d.r+1+"em"}),o.html(d.c+" x "+d.r)};this.attach=function(t,e){t.editable.on("keydown",v),t.editable.on("mousedown",p),t.editable.on("keyup mouseup",y),t.editable.on("scroll",k),t.editable.on("dragenter dragover dragleave",!1),t.editable.on("drop",g),t.handle.on("mousedown",C),t.toolbar.on("click",w),t.popover.on("click",w),t.toolbar.on("mousedown",x),t.popover.on("mousedown",x),t.statusbar.on("mousedown",A);var n=t.toolbar,a=n.find(".note-dimension-picker-mousecatcher");a.on("mousemove",E),e.onenter&&t.editable.keypress(function(t){t.keyCode===s.ENTER&&e.onenter(t)}),e.onfocus&&t.editable.focus(e.onfocus),e.onblur&&t.editable.blur(e.onblur),e.onkeyup&&t.editable.keyup(e.onkeyup),e.onkeydown&&t.editable.keydown(e.onkeydown)},this.dettach=function(t){t.editable.off(),t.toolbar.off(),t.handle.off(),t.popover.off()}},v=function(){{var n={picture:'<button type="button" class="btn btn-default btn-sm btn-small" title="Picture" data-event="showImageDialog" tabindex="-1"><i class="icon-picture"></i></button>',link:'<button type="button" class="btn btn-default btn-sm btn-small" title="Link" data-event="showLinkDialog" data-shortcut="Ctrl+K" data-mac-shortcut="⌘+K" tabindex="-1"><i class="icon-link"></i></button>',table:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="Table" data-toggle="dropdown" tabindex="-1"><i class="icon-table"></i> <span class="caret"></span></button><ul class="dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>',style:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="Style" data-toggle="dropdown" tabindex="-1"><i class="icon-magic"></i> <span class="caret"></span></button><ul class="dropdown-menu"><li><a data-event="formatBlock" data-value="p">Normal</a></li><li><a data-event="formatBlock" data-value="blockquote"><blockquote>Quote</blockquote></a></li><li><a data-event="formatBlock" data-value="pre">Code</a></li><li><a data-event="formatBlock" data-value="h1"><h1>Header 1</h1></a></li><li><a data-event="formatBlock" data-value="h2"><h2>Header 2</h2></a></li><li><a data-event="formatBlock" data-value="h3"><h3>Header 3</h3></a></li><li><a data-event="formatBlock" data-value="h4"><h4>Header 4</h4></a></li><li><a data-event="formatBlock" data-value="h5"><h5>Header 5</h5></a></li><li><a data-event="formatBlock" data-value="h6"><h6>Header 6</h6></a></li></ul>',fontsize:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="Font Size" tabindex="-1"><span class="note-current-fontsize">11</span> <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="fontSize" data-value="8"><i class="icon-ok"></i> 8</a></li><li><a data-event="fontSize" data-value="9"><i class="icon-ok"></i> 9</a></li><li><a data-event="fontSize" data-value="10"><i class="icon-ok"></i> 10</a></li><li><a data-event="fontSize" data-value="11"><i class="icon-ok"></i> 11</a></li><li><a data-event="fontSize" data-value="12"><i class="icon-ok"></i> 12</a></li><li><a data-event="fontSize" data-value="14"><i class="icon-ok"></i> 14</a></li><li><a data-event="fontSize" data-value="18"><i class="icon-ok"></i> 18</a></li><li><a data-event="fontSize" data-value="24"><i class="icon-ok"></i> 24</a></li><li><a data-event="fontSize" data-value="36"><i class="icon-ok"></i> 36</a></li></ul>',color:'<button type="button" class="btn btn-default btn-sm btn-small note-recent-color" title="Recent Color" data-event="color" data-value=\'{"foreColor":"black","backColor":"yellow"}\' tabindex="-1"><i class="icon-font" style="color:black;background-color:yellow;"></i></button><button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="More Color" data-toggle="dropdown" tabindex="-1"><span class="caret"></span></button><ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">BackColor</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">FontColor</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',bold:'<button type="button" class="btn btn-default btn-sm btn-small" title="Bold" data-shortcut="Ctrl+B" data-mac-shortcut="⌘+B" data-event="bold" tabindex="-1"><i class="icon-bold"></i></button>',italic:'<button type="button" class="btn btn-default btn-sm btn-small" title="Italic" data-shortcut="Ctrl+I" data-mac-shortcut="⌘+I" data-event="italic" tabindex="-1"><i class="icon-italic"></i></button>',underline:'<button type="button" class="btn btn-default btn-sm btn-small" title="Underline" data-shortcut="Ctrl+U" data-mac-shortcut="⌘+U" data-event="underline" tabindex="-1"><i class="icon-underline"></i></button>',clear:'<button type="button" class="btn btn-default btn-sm btn-small" title="Remove Font Style" data-shortcut="Ctrl+\\" data-mac-shortcut="⌘+\\" data-event="removeFormat" tabindex="-1"><i class="icon-eraser"></i></button>',ul:'<button type="button" class="btn btn-default btn-sm btn-small" title="Unordered list" data-shortcut="Ctrl+Shift+8" data-mac-shortcut="⌘+⇧+7" data-event="insertUnorderedList" tabindex="-1"><i class="icon-list-ul"></i></button>',ol:'<button type="button" class="btn btn-default btn-sm btn-small" title="Ordered list" data-shortcut="Ctrl+Shift+7" data-mac-shortcut="⌘+⇧+8" data-event="insertOrderedList" tabindex="-1"><i class="icon-list-ol"></i></button>',paragraph:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" title="Paragraph" data-toggle="dropdown" tabindex="-1"><i class="icon-align-left"></i>  <span class="caret"></span></button><ul class="dropdown-menu"><li><div class="note-align btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Align left" data-shortcut="Ctrl+Shift+L" data-mac-shortcut="⌘+⇧+L" data-event="justifyLeft" tabindex="-1"><i class="icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Align center" data-shortcut="Ctrl+Shift+E" data-mac-shortcut="⌘+⇧+E" data-event="justifyCenter" tabindex="-1"><i class="icon-align-center"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Align right" data-shortcut="Ctrl+Shift+R" data-mac-shortcut="⌘+⇧+R" data-event="justifyRight" tabindex="-1"><i class="icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Justify full" data-shortcut="Ctrl+Shift+J" data-mac-shortcut="⌘+⇧+J" data-event="justifyFull" tabindex="-1"><i class="icon-align-justify"></i></button></div></li><li><div class="note-list btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Outdent" data-shortcut="Ctrl+[" data-mac-shortcut="⌘+[" data-event="outdent" tabindex="-1"><i class="icon-indent-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Indent" data-shortcut="Ctrl+]" data-mac-shortcut="⌘+]" data-event="indent" tabindex="-1"><i class="icon-indent-right"></i></button></li></ul>',height:'<button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="Line Height" tabindex="-1"><i class="icon-text-height"></i>&nbsp; <b class="caret"></b></button><ul class="dropdown-menu"><li><a data-event="lineHeight" data-value="1.0"><i class="icon-ok"></i> 1.0</a></li><li><a data-event="lineHeight" data-value="1.2"><i class="icon-ok"></i> 1.2</a></li><li><a data-event="lineHeight" data-value="1.4"><i class="icon-ok"></i> 1.4</a></li><li><a data-event="lineHeight" data-value="1.5"><i class="icon-ok"></i> 1.5</a></li><li><a data-event="lineHeight" data-value="1.6"><i class="icon-ok"></i> 1.6</a></li><li><a data-event="lineHeight" data-value="1.8"><i class="icon-ok"></i> 1.8</a></li><li><a data-event="lineHeight" data-value="2.0"><i class="icon-ok"></i> 2.0</a></li><li><a data-event="lineHeight" data-value="3.0"><i class="icon-ok"></i> 3.0</a></li></ul>',help:'<button type="button" class="btn btn-default btn-sm btn-small" title="Help" data-shortcut="Ctrl+/" data-mac-shortcut="⌘+/" data-event="showHelpDialog" tabindex="-1"><i class="icon-question"></i></button>',fullscreen:'<button type="button" class="btn btn-default btn-sm btn-small" title="Full Screen" data-event="fullscreen" tabindex="-1"><i class="icon-fullscreen"></i></button>'},a='<div class="note-popover"><div class="note-link-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-link-content"><a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Edit" data-event="showLinkDialog" tabindex="-1"><i class="icon-edit"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Unlink" data-event="unlink" tabindex="-1"><i class="icon-unlink"></i></button></div></div></div><div class="note-image-popover popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content note-image-content"><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Full" data-event="resize" data-value="1" tabindex="-1"><i class="icon-resize-full"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Half" data-event="resize" data-value="0.5" tabindex="-1">½</button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Thrid" data-event="resize" data-value="0.33" tabindex="-1">⅓</button><button type="button" class="btn btn-default btn-sm btn-small" title="Resize Quarter" data-event="resize" data-value="0.25" tabindex="-1">¼</button></div><div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small" title="Float Left" data-event="float" data-value="left" tabindex="-1"><i class="icon-align-left"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Float Right" data-event="float" data-value="right" tabindex="-1"><i class="icon-align-right"></i></button><button type="button" class="btn btn-default btn-sm btn-small" title="Float None" data-event="float" data-value="none" tabindex="-1"><i class="icon-reorder"></i></button></div></div></div></div>',o='<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>',i='<table class="note-shortcut"><thead><tr><th></th><th>Text formatting</th></tr></thead><tbody><tr><td>⌘ + B</td><td>Toggle Bold</td></tr><tr><td>⌘ + I</td><td>Toggle Italic</td></tr><tr><td>⌘ + U</td><td>Toggle Underline</td></tr><tr><td>⌘ + ⇧ + S</td><td>Toggle Strike</td></tr><tr><td>⌘ + \\</td><td>Remove Font Style</td></tr></tr></tbody></table>',l='<table class="note-shortcut"><thead><tr><th></th><th>Action</th></tr></thead><tbody><tr><td>⌘ + Z</td><td>Undo</td></tr><tr><td>⌘ + ⇧ + Z</td><td>Redo</td></tr><tr><td>⌘ + ]</td><td>Indent</td></tr><tr><td>⌘ + [</td><td>Outdent</td></tr><tr><td>⌘ + K</td><td>Insert Link</td></tr><tr><td>⌘ + ENTER</td><td>Insert Horizontal Rule</td></tr></tbody></table>',r='<table class="note-shortcut"><thead><tr><th></th><th>Paragraph formatting</th></tr></thead><tbody><tr><td>⌘ + ⇧ + L</td><td>Align Left</td></tr><tr><td>⌘ + ⇧ + E</td><td>Align Center</td></tr><tr><td>⌘ + ⇧ + R</td><td>Align Right</td></tr><tr><td>⌘ + ⇧ + J</td><td>Justify Full</td></tr><tr><td>⌘ + ⇧ + NUM7</td><td>Ordered List</td></tr><tr><td>⌘ + ⇧ + NUM8</td><td>Unordered List</td></tr></tbody></table>',d='<table class="note-shortcut"><thead><tr><th></th><th>Document Style</th></tr></thead><tbody><tr><td>⌘ + NUM0</td><td>Normal Text</td></tr><tr><td>⌘ + NUM1</td><td>Heading 1</td></tr><tr><td>⌘ + NUM2</td><td>Heading 2</td></tr><tr><td>⌘ + NUM3</td><td>Heading 3</td></tr><tr><td>⌘ + NUM4</td><td>Heading 4</td></tr><tr><td>⌘ + NUM5</td><td>Heading 5</td></tr><tr><td>⌘ + NUM6</td><td>Heading 6</td></tr></tbody></table>',c='<table class="note-shortcut-layout"><tbody><tr><td>'+l+"</td><td>"+i+"</td></tr><tr><td>"+d+"</td><td>"+r+"</td></tr></tbody></table>",u='<div class="note-dialog"><div class="note-image-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" tabindex="-1">×</button><h4>Insert Image</h4></div><div class="modal-body"><div class="row-fluid"><div class="note-dropzone span12">Drag an image here</div><div>or if you prefer...</div><input class="note-image-input" type="file" class="note-link-url" type="text" /></div></div></div></div></div><div class="note-link-dialog modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" tabindex="-1">×</button><h4>Edit Link</h4></div><div class="modal-body"><div class="row-fluid"><div class="form-group"><label>Text to display</label><span class="note-link-text form-control input-xlarge uneditable-input" /></div><div class="form-group"><label>To what URL should this link go?</label><input class="note-link-url form-control span12" type="text" /></div></div></div><div class="modal-footer"><button href="#" class="btn btn-primary note-link-btn disabled" disabled="disabled">Link</button></div></div></div></div><div class="note-help-dialog modal fade" aria-hidden="false"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="modal-background"><a class="modal-close pull-right" data-dismiss="modal" aria-hidden="true" tabindex="-1">Close</a><div class="title">Keyboard shortcuts</div>'+c+'<p class="text-center"><a href="//hackerwins.github.io/summernote/" target="_blank">Summernote v0.3</a> · <a href="//github.com/HackerWins/summernote" target="_blank">Project</a> · <a href="//github.com/HackerWins/summernote/issues" target="_blank">Issues</a></p></div></div></div></div></div>',f=function(n,a){
n.find("button").each(function(n,a){var o=t(a),i=o.attr(e?"data-mac-shortcut":"data-shortcut");i&&o.attr("title",function(t,e){return e+" ("+i+")"})}).tooltip({container:"body",placement:a||"top"})},b=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#EFF7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],h=function(e){e.find(".note-color-palette").each(function(){for(var e=t(this),n=e.attr("data-target-event"),a="",o=0,i=b.length;i>o;o++){for(var l=b[o],r="<div>",s=0,d=l.length;d>s;s++){var c=l[s],u=['<button type="button" class="note-color-btn" style="background-color:',c,';" data-event="',n,'" data-value="',c,'" title="',c,'" data-toggle="button" tabindex="-1"></button>'].join("");r+=u}r+="</div>",a+=r}e.html(a)})},v=(this.createLayout=function(e,i,l,r){if(!e.next().hasClass("note-editor")){var d=t('<div class="note-editor"></div>');if(i>0){t('<div class="note-statusbar"><div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div></div>').prependTo(d)}var c=t('<div class="note-editable" contentEditable="true"></div>').prependTo(d);i&&c.height(i),l&&c.data("tabsize",l),c.html(e.html()),c.data("NoteHistory",new s);for(var b="",v=0,m=r.length;m>v;v++){var g=r[v];b+='<div class="note-'+g[0]+' btn-group">';for(var p=0,y=g[1].length;y>p;p++)b+=n[g[1][p]];b+="</div>"}b='<div class="note-toolbar btn-toolbar">'+b+"</div>";var k=t(b).prependTo(d);h(k),f(k,"bottom");var C=t(a).prependTo(d);f(C),t(o).prependTo(d),t(u).prependTo(d),d.insertAfter(e),e.hide()}},this.layoutInfoFromHolder=function(t){var e=t.next();if(e.hasClass("note-editor"))return{editor:e,toolbar:e.find(".note-toolbar"),editable:e.find(".note-editable"),statusbar:e.find(".note-statusbar"),popover:e.find(".note-popover"),handle:e.find(".note-handle"),dialog:e.find(".note-dialog")}});this.removeLayout=function(t){var e=v(t);e&&(t.html(e.editable.html()),e.editor.remove(),t.show())}}},m=new v,g=new h;t.fn.extend({summernote:function(e){if(e=t.extend({toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture"]],["fullscreen",["fullscreen"]],["help",["help"]]]},e),this.each(function(n,a){var o=t(a);m.createLayout(o,e.height,e.tabsize,e.toolbar);var i=m.layoutInfoFromHolder(o);g.attach(i,e)}),this.first()&&e.focus){var n=m.layoutInfoFromHolder(this.first());n.editable.focus()}this.length>0&&e.oninit&&e.oninit()},code:function(e){if(void 0===e){var n=this.first();if(0==n.length)return;var a=m.layoutInfoFromHolder(n),o=!(!a||!a.editable);return o?a.editable.html():n.html()}this.each(function(n,a){var o=m.layoutInfoFromHolder(t(a));o&&o.editable&&o.editable.html(e)})},destroy:function(){this.each(function(e,n){var a=t(n),o=m.layoutInfoFromHolder(a);o&&o.editable&&(g.dettach(o),m.removeLayout(a))})},summernoteInner:function(){return{dom:i,list:o,func:a,range:l}}})}(window.jQuery),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){"use strict";var n,a,o=this.length>>>0,i=!1;for(1<arguments.length&&(a=e,i=!0),n=0;o>n;++n)this.hasOwnProperty(n)&&(i?a=t(a,this[n],n,this):(a=this[n],i=!0));if(!i)throw new TypeError("Reduce of empty array with no initial value");return a});