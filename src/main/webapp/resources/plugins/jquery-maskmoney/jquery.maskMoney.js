!function(e){e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var t={destroy:function(){var t=e(this);return t.unbind(".maskMoney"),e.browser.msie&&(this.onpaste=null),this},mask:function(){return this.trigger("mask")},init:function(t){return t=e.extend({symbol:"",symbolStay:!1,thousands:",",decimal:".",precision:2,defaultZero:!0,allowZero:!1,allowNegative:!1},t),this.each(function(){function a(){y=!0}function r(){y=!1}function n(t){t=t||window.event;var n=t.which||t.charCode||t.keyCode;if(void 0==n)return!1;if(48>n||n>57)return 45==n?(a(),p.val(d(p)),!1):43==n?(a(),p.val(p.val().replace("-","")),!1):13==n||9==n?(y&&(r(),e(this).change()),!0):!e.browser.mozilla||37!=n&&39!=n||0!=t.charCode?(u(t),!0):!0;if(o(p))return!1;u(t);var s=String.fromCharCode(n),l=p.get(0),i=f(l),v=i.start,g=i.end;return l.value=l.value.substring(0,v)+s+l.value.substring(g,l.value.length),c(l,v+1),a(),!1}function o(e){var t=e.val().length>=e.attr("maxlength")&&e.attr("maxlength")>=0,a=f(e.get(0)),r=a.start,n=a.end,o=a.start!=a.end&&e.val().substring(r,n).match(/\d/)?!0:!1;return t&&!o}function s(t){t=t||window.event;var n=t.which||t.charCode||t.keyCode;if(void 0==n)return!1;var o=p.get(0),s=f(o),l=s.start,i=s.end;return 8==n?(u(t),l==i?(o.value=o.value.substring(0,l-1)+o.value.substring(i,o.value.length),l-=1):o.value=o.value.substring(0,l)+o.value.substring(i,o.value.length),c(o,l),a(),!1):9==n?(y&&(e(this).change(),r()),!0):46==n||63272==n?(u(t),o.selectionStart==o.selectionEnd?o.value=o.value.substring(0,l)+o.value.substring(i+1,o.value.length):o.value=o.value.substring(0,l)+o.value.substring(i,o.value.length),c(o,l),a(),!1):!0}function l(e){var a=h();if(p.val(p.val()==a?"":m(""==p.val()&&t.defaultZero?a:p.val())),this.createTextRange){var r=this.createTextRange();r.collapse(!1),r.select()}}function i(a){e.browser.msie&&n(a),""==p.val()||p.val()==m(h())||p.val()==t.symbol?p.val(t.allowZero?t.symbolStay?m(h()):h():""):t.symbolStay?t.symbolStay&&p.val()==t.symbol&&p.val(m(h())):p.val(p.val().replace(t.symbol,""))}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function c(e,t){var a=p.val().length;p.val(g(e.value));var r=p.val().length;t-=a-r,b(p,t)}function v(){var e=p.val();p.val(g(e))}function g(e){e=e.replace(t.symbol,"");var a="0123456789",r=e.length,n="",o="",s="";if(0!=r&&"-"==e.charAt(0)&&(e=e.replace("-",""),t.allowNegative&&(s="-")),0==r){if(!t.defaultZero)return o;o="0.00"}for(var l=0;r>l&&("0"==e.charAt(l)||e.charAt(l)==t.decimal);l++);for(;r>l;l++)-1!=a.indexOf(e.charAt(l))&&(n+=e.charAt(l));var i=parseFloat(n);i=isNaN(i)?0:i/Math.pow(10,t.precision),o=i.toFixed(t.precision),l=0==t.precision?0:1;var u,c=(o=o.split("."))[l].substr(0,t.precision);for(u=(o=o[0]).length;(u-=3)>=1;)o=o.substr(0,u)+t.thousands+o.substr(u);return m(t.precision>0?s+o+t.decimal+c+Array(t.precision+1-c.length).join(0):s+o)}function h(){var e=parseFloat("0")/Math.pow(10,t.precision);return e.toFixed(t.precision).replace(new RegExp("\\.","g"),t.decimal)}function m(e){if(""!=t.symbol){var a="";0!=e.length&&"-"==e.charAt(0)&&(e=e.replace("-",""),a="-"),e.substr(0,t.symbol.length)!=t.symbol&&(e=a+t.symbol+e)}return e}function d(e){var a=e.val();return t.allowNegative?""!=a&&"-"==a.charAt(0)?a.replace("-",""):"-"+a:a}function b(t,a){return e(t).each(function(e,t){if(t.setSelectionRange)t.focus(),t.setSelectionRange(a,a);else if(t.createTextRange){var r=t.createTextRange();r.collapse(!0),r.moveEnd("character",a),r.moveStart("character",a),r.select()}}),this}function f(e){var t,a,r,n,o,s=0,l=0;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(s=e.selectionStart,l=e.selectionEnd):(a=document.selection.createRange(),a&&a.parentElement()==e&&(n=e.value.length,t=e.value.replace(/\r\n/g,"\n"),r=e.createTextRange(),r.moveToBookmark(a.getBookmark()),o=e.createTextRange(),o.collapse(!1),r.compareEndPoints("StartToEnd",o)>-1?s=l=n:(s=-r.moveStart("character",-n),s+=t.slice(0,s).split("\n").length-1,r.compareEndPoints("EndToEnd",o)>-1?l=n:(l=-r.moveEnd("character",-n),l+=t.slice(0,l).split("\n").length-1)))),{start:s,end:l}}var p=e(this),y=!1;p.unbind(".maskMoney"),p.bind("keypress.maskMoney",n),p.bind("keydown.maskMoney",s),p.bind("blur.maskMoney",i),p.bind("focus.maskMoney",l),p.bind("mask.maskMoney",v)})}};e.fn.maskMoney=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("Method "+a+" does not exist on jQuery.maskMoney"):t.init.apply(this,arguments)}}(window.jQuery||window.Zepto);