var TableExport=function(){"use strict";var e=function(){$(".export-pdf").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"pdf",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-png").on("click",function(e){e.preventDefault(),e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"png",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-excel").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"excel",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-doc").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"doc",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-powerpoint").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"powerpoint",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-csv").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"csv",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-txt").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"txt",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-xml").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"xml",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-sql").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"sql",escape:"false",ignoreColumn:"["+a+"]"})}),$(".export-json").on("click",function(e){e.preventDefault();var t=$(this).data("table"),a=$(this).data("ignorecolumn");$(t).tableExport({type:"json",escape:"false",ignoreColumn:"["+a+"]"})})},t=function(){function e(e,t){for(var a=e.fnGetData(t),n=$(">td",t),l=0,o=n.length;o>l;l++)e.fnUpdate(a[l],t,l,!1);e.fnDraw()}function t(e,t){var a=e.fnGetData(t),n=$(">td",t);n[0].innerHTML='<input type="text" class="form-control" value="'+a[0]+'">',n[1].innerHTML='<input type="text" class="form-control" value="'+a[1]+'">',n[2].innerHTML='<input type="text" class="form-control" value="'+a[2]+'">',n[3].innerHTML='<a class="save-row" href="">Save</a>',n[4].innerHTML='<a class="cancel-row" href="">Cancel</a>'}function a(e,t){var a=$("input",t);e.fnUpdate(a[0].value,t,0,!1),e.fnUpdate(a[1].value,t,1,!1),e.fnUpdate(a[2].value,t,2,!1),e.fnUpdate('<a class="edit-row" href="">Edit</a>',t,3,!1),e.fnUpdate('<a class="delete-row" href="">Delete</a>',t,4,!1),e.fnDraw(),n=!1,l=null}var n=!1,l=null;$("body").on("click",".add-row",function(a){if(a.preventDefault(),0==n){l&&e(o,l),n=!0;var r=o.fnAddData(["","","","",""]),s=o.fnGetNodes(r[0]);t(o,s),l=s}}),$("#sample-table-2").on("click",".cancel-row",function(t){if(t.preventDefault(),n){n=!1,l=null;var a=$(this).parents("tr")[0];o.fnDeleteRow(a)}else e(o,l),l=null}),$("#sample-table-2").on("click",".delete-row",function(e){e.preventDefault(),n&&l&&(o.fnDeleteRow(l),n=!1);var t=$(this).parents("tr")[0];bootbox.confirm("Are you sure to delete this row?",function(e){e&&($.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> Do some ajax to sync with backend...'}),$.mockjax({url:"/tabledata/delete/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/delete/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&o.fnDeleteRow(t)}}))})}),$("#sample-table-2").on("click",".save-row",function(e){e.preventDefault();var t=$(this).parents("tr")[0];$.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> Do some ajax to sync with backend...'}),$.mockjax({url:"/tabledata/add/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/add/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&a(o,t)}})}),$("#sample-table-2").on("click",".edit-row",function(a){a.preventDefault(),l&&(n?(o.fnDeleteRow(l),n=!1):e(o,l));var r=$(this).parents("tr")[0];t(o,r),l=r});var o=$("#sample-table-2").dataTable({aoColumnDefs:[{aTargets:[0]}],oLanguage:{sLengthMenu:"Show _MENU_ Rows",sSearch:"",oPaginate:{sPrevious:"",sNext:""}},aaSorting:[[1,"asc"]],aLengthMenu:[[5,10,15,20,-1],[5,10,15,20,"All"]],iDisplayLength:10});$("#sample-table-2_wrapper .dataTables_filter input").addClass("form-control input-sm").attr("placeholder","Search"),$("#sample-table-2_wrapper .dataTables_length select").addClass("m-wrap small"),$("#sample-table-2_wrapper .dataTables_length select").select2(),$('#sample-table-2_column_toggler input[type="checkbox"]').change(function(){var e=parseInt($(this).attr("data-column")),t=o.fnSettings().aoColumns[e].bVisible;o.fnSetColumnVis(e,t?!1:!0)})};return{init:function(){e(),t()}}}();