function course(){$.ajax({url:"/sgterp/protected/courselist",type:"POST",success:function(e){var t=JSON.parse(e),a=Object.keys(t).length/7;semesterStore=t,semesterSize=a;var n=document.getElementById("courseSelect");$("#courseSelect").find("option").remove();var l=document.createElement("option");l.value="select",l.innerHTML="Select",l.selected="selected",n.appendChild(l);for(var s=0;a>s;s++){var r="courseId"+s,c="courseName"+s,o=document.createElement("option");o.value=t[r],o.innerHTML=t[c],n.appendChild(o)}},error:function(e){alert("Unable to fetch course data, Please try again!")}})}function courseChange(e){var t=document.getElementById("semOrYr");$("#semOrYr").find("option").remove();var a=document.createElement("option");a.value="select",a.innerHTML="Select",a.selected="selected",t.appendChild(a);for(var n,l,s=0;semesterSize>s;s++){var r="courseId"+s,c="courseDuration"+s;if(l="coursePattern"+s,e==semesterStore[r]){n=semesterStore[c];break}}for(var o=1;n>=o;o++){var i=document.createElement("option");i.value=o+" "+semesterStore[l],i.innerHTML=o+" "+semesterStore[l],t.appendChild(i)}}var semesterStore,semesterSize,TableData=function(){var e=function(){var e=$("#sample_1").dataTable({aoColumnDefs:[{bSortable:!1,bSearchable:!1,aTargets:[0,-1,-2]}],oLanguage:{sLengthMenu:"Show _MENU_ Rows",sSearch:"",oPaginate:{sPrevious:"",sNext:""}},aaSorting:[[1,"asc"]],aLengthMenu:[[5,10,15,20,-1],[5,10,15,20,"All"]],iDisplayLength:10});$("#sample_1_wrapper .dataTables_filter input").addClass("form-size input-sm").attr("placeholder","Search"),$("#sample_1_wrapper .dataTables_length select").addClass("m-wrap small"),$("#sample_1_wrapper .dataTables_length select").select2(),$('#sample_1_column_toggler input[type="checkbox"]').change(function(){var t=parseInt($(this).attr("data-column")),a=e.fnSettings().aoColumns[t].bVisible;e.fnSetColumnVis(t,a?!1:!0)})},t=function(){function e(e,t){for(var a=e.fnGetData(t),n=$(">td",t),l=0,s=n.length;s>l;l++)e.fnUpdate(a[l],t,l,!1);e.fnDraw()}function t(e,t){var a=e.fnGetData(t);course();var n=$(">td",t);alert(a[0]),n[0].innerHTML='<input type="text" style="width:100%" id="subjectId" value="'+a[0]+'" >',n[0].style.display="none",$("#subjectId").bind("keyup blur",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))}),n[1].innerHTML='<input type="text" style="width:100%" value="'+a[1]+'" required>',n[2].innerHTML='<input type="text" style="width:100%" value="'+a[2]+'" required>',n[3].innerHTML='<select id="elective" class="form-size form-control" required><option value="False">False</option><option value="True">True</option></select>',n[4].innerHTML='<input type="text" style="width:100%" maxlength="2" id="lecture" value="'+a[4]+'" >',$("#lecture").bind("keyup blur",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))}),n[5].innerHTML='<select id="courseSelect" class="form-control search-select" required style="width:100%" onchange="courseChange(this.value);" ><option>Select</option></select>',$("#courseSelect").select2(),n[6].innerHTML='<select id="semOrYr" class="form-size form-control" required><option>Select</option></select>',n[7].innerHTML='<select id="practical" class="form-control" required  name="practical"><option value="">Select</option><option value="No">No</option><option value="Yes">Yes</option></select>',n[8].innerHTML='<a class="save-row btn btn-green btn-sm" href=""><i class="fa fa-save"></i>&nbsp;Save</a>',n[9].innerHTML='<a class="cancel-row btn btn-bricky btn-sm" href=""><i class="clip-cancel-circle"></i>&nbsp;Cancel</a>'}function a(e,t){var a=e.fnGetData(t);course();var n=$(">td",t);n[0].innerHTML='<input type="text" name="subjectId" readonly style="width:100%" value="'+a[0]+'" style="display:none">',n[1].innerHTML='<input type="text" style="width:100%" value="'+$("#"+a[0]+"1").text()+'" >',n[2].innerHTML='<input type="text" style="width:100%" value="'+a[2]+'" >',n[3].innerHTML='<select id="elective" class="form-size form-control" required><option value="False">False</option><option value="True">True</option></select>',n[4].innerHTML='<input type="text" style="width:100%" maxlength="2"  id="lecture1" value="'+a[4]+'" >',$("#lecture1").bind("keyup blur",function(){$(this).val($(this).val().replace(/[^0-9]/g,""))}),n[5].innerHTML='<select required id="courseSelect" style="width:100%" class="form-control search-select" onchange="courseChange(this.value);"><option>Select</option></select>',n[6].innerHTML='<select id="semOrYr"  class="form-control" name="semOrYr"><option>Select</option></select>',n[7].innerHTML='<select id="practical" class="form-control" required  name="practical"><option value="">Select</option><option value="No">No</option><option value="Yes">Yes</option></select>',n[8].innerHTML='<a class="save-edit-row btn btn-green btn-sm" href=""><i class="fa fa-save"></i>&nbsp;Save</a>',n[9].innerHTML='<a class="cancel-row btn btn-bricky btn-sm" href=""><i class="clip-cancel-circle"></i>&nbsp;Cancel</a>',$("#courseSelect").select2()}function n(e,t){{var a=$("input",t);$("select",t)}if(null==a[1].value||""==a[1].value)return alert("Please Enter Subject Code"),!1;if(null==a[2].value||""==a[2].value)return alert("Please Enter Subject Name"),!1;if(null==a[3].value||""==a[3].value)return alert("Please Enter Total Lectures "),!1;if(null==$("#courseSelect").val()||""==$("#courseSelect").val()||"select"==$("#courseSelect").val())return alert("Please Select Course First "),!1;if(null==$("#practical").val()||""==$("#practical").val()||"select"==$("#practical").val())return alert("Please Select Subject Type"),!1;if(null==$("#semOrYr").val()||""==$("#semOrYr").val()||"select"==$("#semOrYr").val())return alert("Please Select Sem/yr "),!1;var n=a[2].value,l=n.replace(/&/g,"%26");$.ajax({url:"addsubject",type:"POST",data:"subjectCode="+a[1].value+"&subjectName="+l+"&elective="+$("#elective").val()+"&totalLectures="+a[3].value+"&courseId="+$("#courseSelect").val()+"&practical="+$("#practical").val()+"&semester="+$("#semOrYr").val(),success:function(n){e.fnUpdate(a[0].value,t,0,!1),e.fnUpdate(a[1].value,t,1,!1),e.fnUpdate(a[2].value,t,2,!1),e.fnUpdate($("#elective option:selected").text(),t,3,!1),e.fnUpdate(a[3].value,t,4,!1),e.fnUpdate($("#courseSelect option:selected").text(),t,5,!1),e.fnUpdate($("#semOrYr option:selected").text(),t,6,!1),e.fnUpdate($("#practical option:selected").text(),t,7,!1),e.fnUpdate('<a class="edit-row btn btn-green btn-sm" href=""><i class="fa fa-edit"></i> Edit</a>',t,8,!1),e.fnUpdate('<a class="delete-row btn btn-bricky btn-sm" href=""><i class="fa fa-trash-o"></i>Delete</a>',t,9,!1),e.fnDraw(),s=!1,r=null,location.reload()},error:function(e){alert("Unable to save, Please try again!")}})}function l(e,t){var a=$("input",t);return"Select"==$("#courseSelect").val()||"Select"==$("#semOrYr").val()||""==$("#practical").val()?void alert("Invalid Inputs"):void $.ajax({url:"addsubject",type:"POST",data:"subjectId="+a[0].value+"&subjectCode="+a[1].value+"&subjectName="+a[2].value+"&elective="+$("#elective").val()+"&totalLectures="+a[3].value+"&courseId="+$("#courseSelect").val()+"&practical="+$("#practical").val()+"&semester="+$("#semOrYr").val(),success:function(n){e.fnUpdate(a[0].value,t,0,!1),e.fnUpdate(a[1].value,t,1,!1),e.fnUpdate(a[2].value,t,2,!1),e.fnUpdate($("#elective option:selected").text(),t,3,!1),e.fnUpdate(a[3].value,t,4,!1),e.fnUpdate($("#courseSelect option:selected").text(),t,5,!1),e.fnUpdate($("#semOrYr option:selected").text(),t,6,!1),e.fnUpdate($("#practical option:selected").text(),t,7,!1),e.fnUpdate('<a class="edit-row btn btn-green btn-sm" href=""><i class="fa fa-edit"></i> Edit</a>',t,8,!1),e.fnUpdate('<a class="delete-row btn btn-bricky btn-sm" href=""><i class="fa fa-trash-o"></i>Delete</a>',t,9,!1),e.fnDraw(),s=!1,r=null,location.reload()},error:function(e){alert("Unable to save, Please try again!")}})}var s=!1,r=null;$.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> loading...'}),$.ajax({url:"subjectList",type:"GET",success:function(t){for(var a=0;a<t.length;a++)if(0==s){if(r&&e(c,r),s=!0,checkPermission)var n=c.fnAddData(["","","","","","","","",""]);else var n=c.fnAddData(["","","","","","",""]);var l=c.fnGetNodes(n[0]);c.fnUpdate(t[a].subjectId,l,0,!1);var o=l.cells;o[0].style.display="none",c.fnUpdate('<form action="/sgterp/protected/subjectUnits" method="Post" ><input type="hidden" name="subjectId" value="'+t[a].subjectId+'"><button type="submit" class=" btn-yellow btn-sm" id="'+t[a].subjectId+'1">'+t[a].subjectCode+"</button></form>",l,1,!1),c.fnUpdate(t[a].subjectName,l,2,!1),c.fnUpdate(t[a].elective,l,3,!1),c.fnUpdate(t[a].totalLectures,l,4,!1),c.fnUpdate(t[a].courseId,l,5,!1),c.fnUpdate(t[a].semester,l,6,!1),c.fnUpdate(t[a].practical,l,7,!1),checkPermission&&(c.fnUpdate('<a class="edit-row btn btn-green btn-sm" href=""><i class="fa fa-edit"></i> Edit</a>',l,8,!1),c.fnUpdate('<a class="delete-row btn btn-bricky btn-sm" href=""><i class="fa fa-trash-o"></i> Delete</a>',l,9,!1)),c.fnDraw(),s=!1,r=null}$.unblockUI()},error:function(e){alert("Unable to fetch data, Please try again!"),$.unblockUI()}}),$("body").on("click",".add-row",function(a){if(a.preventDefault(),0==s){r&&e(c,r),s=!0;var n=c.fnAddData(["","","","","","","","","",""]),l=c.fnGetNodes(n[0]);t(c,l),r=l}}),$("#sample_2").on("click",".cancel-row",function(t){if(t.preventDefault(),s){s=!1,r=null;var a=$(this).parents("tr")[0];c.fnDeleteRow(a)}else e(c,r),r=null}),$("#sample_2").on("click",".delete-row",function(e){e.preventDefault(),s&&r&&(c.fnDeleteRow(r),s=!1);var t=$(this).parents("tr")[0],a=t.cells,n=a[0].innerHTML;bootbox.confirm("Are you sure to delete this record?",function(e){e&&($.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> Deleting Record...'}),$.mockjax({url:"/tabledata/delete/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/delete/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&$.ajax({url:"deletesubject",type:"POST",data:"subjectId="+n,success:function(e){c.fnDeleteRow(t),location.reload()},error:function(e){alert("Record already in use")}})}}))})}),$("#sample_2").on("click",".save-row",function(e){e.preventDefault();var t=$(this).parents("tr")[0];$.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> saving data...'}),$.mockjax({url:"/tabledata/add/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/add/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&n(c,t)}})}),$("#sample_2").on("click",".save-edit-row",function(e){e.preventDefault();var t=$(this).parents("tr")[0];$.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> saving data...'}),$.mockjax({url:"/tabledata/add/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/add/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&l(c,t)}})}),$("#sample_2").on("click",".edit-row",function(t){t.preventDefault(),r&&(s?(c.fnDeleteRow(r),s=!1):e(c,r));var n=$(this).parents("tr")[0];a(c,n),r=n});var c=$("#sample_2").dataTable({aoColumnDefs:[{bSortable:!1,bSearchable:!1,aTargets:[0,-1,-2]}],oLanguage:{sLengthMenu:"Show _MENU_ Rows",sSearch:"",oPaginate:{sPrevious:"",sNext:""}},aaSorting:[[1,"asc"]],aLengthMenu:[[5,10,15,20,-1],[5,10,15,20,"All"]],iDisplayLength:10});$("#sample_2_wrapper .dataTables_filter input").addClass("form-size input-sm").attr("placeholder","Search"),$("#sample_2_wrapper .dataTables_length select").addClass("m-wrap small"),$("#sample_2_wrapper .dataTables_length select").select2(),$('#sample_2_column_toggler input[type="checkbox"]').change(function(){var e=parseInt($(this).attr("data-column")),t=c.fnSettings().aoColumns[e].bVisible;c.fnSetColumnVis(e,t?!1:!0)})};return{init:function(){e(),t()}}}();