function isAlpha(e){46==e.keyCode||8==e.keyCode||37==e.keyCode||39==e.keyCode||189==e.keyCode||(e.keyCode<65||e.keyCode>90)&&e.preventDefault()}function uppercase(e){e.value=e.value.toUpperCase()}var TableData=function(){var e=function(){var e=$("#sample_1").dataTable({aoColumnDefs:[{bSortable:!1,bSearchable:!1,aTargets:[-1,-2]}],oLanguage:{sLengthMenu:"Show _MENU_ Rows",sSearch:"",oPaginate:{sPrevious:"",sNext:""}},aaSorting:[[1,"asc"]],aLengthMenu:[[5,10,15,20,-1],[5,10,15,20,"All"]],iDisplayLength:10});$("#sample_1_wrapper .dataTables_filter input").addClass("form-control input-sm").attr("placeholder","Search"),$("#sample_1_wrapper .dataTables_length select").addClass("m-wrap small"),$("#sample_1_wrapper .dataTables_length select").select2(),$('#sample_1_column_toggler input[type="checkbox"]').change(function(){var a=parseInt($(this).attr("data-column")),n=e.fnSettings().aoColumns[a].bVisible;e.fnSetColumnVis(a,n?!1:!0)})},a=function(){function e(e,a){for(var n=e.fnGetData(a),t=$(">td",a),s=0,l=t.length;l>s;s++)e.fnUpdate(n[s],a,s,!1);e.fnDraw()}function a(e,a){var n=e.fnGetData(a),t=$(">td",a);t[0].innerHTML='<input type="text" id="permissionId" OnKeydown="isAlpha(event);" onkeyup="uppercase(this);" class="form-control"  value="'+n[0]+'" required>',t[1].innerHTML='<input type="text" class="form-control" value="'+n[1]+'">',t[2].innerHTML='<a class="save-row btn btn-green btn-sm" href=""><i class="fa fa-save"></i> Save</a>',t[3].innerHTML='<a class="cancel-row btn btn-bricky btn-sm" href=""><i class="clip-cancel-circle"></i> Cancel</a>'}function n(e,a){var n=e.fnGetData(a),t=$(">td",a);t[0].innerHTML='<input type="text" readonly  OnKeydown="isAlpha(event);"  onkeyup="uppercase(this);" class="form-control" value="'+n[0]+'">',t[1].innerHTML='<input type="text" class="form-control" value="'+n[1]+'">',t[2].innerHTML='<a class="save-row btn btn-green btn-sm" href=""><i class="fa fa-save"></i> Save</a>',t[3].innerHTML='<a class="cancel-row btn btn-bricky btn-sm" href=""><i class="clip-cancel-circle"></i> Cancel</a>'}function t(e,a){var n=$("input",a),t=n[1].value,r=t.replace(/&/g,"%26");$.ajax({url:"addpermissions",type:"POST",data:"permissionId="+n[0].value+"&description="+r,success:function(t){e.fnUpdate(n[0].value,a,0,!1),e.fnUpdate(n[1].value,a,1,!1),e.fnUpdate('<a class="edit-row btn btn-green btn-sm" href=""><i class="fa fa-edit"></i> Edit</a>',a,2,!1),e.fnUpdate('<a class="delete-row btn btn-bricky btn-sm" href=""><i class="fa fa-trash-o"></i> Delete</a>',a,3,!1),e.fnDraw(),s=!1,l=null,location.reload()},error:function(e){alert("Unable to save, Please try again!")}})}var s=!1,l=null;$.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> loading...'}),$.ajax({url:"permissionlist",type:"GET",success:function(a){size=a.length;for(var n=0;n<size;n++)if(0==s){l&&e(r,l),s=!0;var t;t=r.fnAddData(authCheck?["",""]:["","","",""]);var i=r.fnGetNodes(t[0]);r.fnUpdate(a[n].permissionId,i,0,!1),r.fnUpdate(a[n].description,i,1,!1),authCheck||(r.fnUpdate('<a class="edit-row btn btn-green btn-sm" href=""><i class="fa fa-edit"></i> Edit</a>',i,2,!1),r.fnUpdate('<a class="delete-row btn btn-bricky btn-sm" href=""><i class="fa fa-trash-o"></i> Delete</a>',i,3,!1)),r.fnDraw(),s=!1,l=null}$.unblockUI()},error:function(e){alert("Unable to fetch data, Please try again!"),$.unblockUI()}}),$("body").on("click",".add-row",function(n){if(n.preventDefault(),0==s){l&&e(r,l),s=!0;var t=r.fnAddData(["","","",""]),i=r.fnGetNodes(t[0]);a(r,i),l=i}}),$("#sample_2").on("click",".cancel-row",function(a){if(a.preventDefault(),s){s=!1,l=null;var n=$(this).parents("tr")[0];r.fnDeleteRow(n)}else e(r,l),l=null}),$("#sample_2").on("click",".delete-row",function(e){e.preventDefault(),s&&l&&(r.fnDeleteRow(l),s=!1);var a=$(this).parents("tr")[0],n=a.cells,t=n[0].innerHTML;bootbox.confirm("Are you sure to delete this permission?",function(e){e&&($.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> Delete Permission...'}),$.mockjax({url:"/tabledata/delete/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),$.ajax({url:"/tabledata/delete/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&$.ajax({url:"deletepermission",type:"POST",data:"permissionId="+t,success:function(e){r.fnDeleteRow(a),location.reload()},error:function(e){alert("Already in use!")}})}}))})}),$("#sample_2").on("click",".save-row",function(e){e.preventDefault();var a=$(this).parents("tr")[0],n=a.cells,s=n[0].children[0].value;return null==s||""==s?(alert("Please Enter Permission name"),!1):0==warnBeforeUpdate("sample_2",s,0,"no","Permission name")?!1:($.blockUI({message:'<i class="fa fa-spinner fa-spin"></i> saving data...'}),$.mockjax({url:"/tabledata/add/webservice",dataType:"json",responseTime:1e3,responseText:{say:"ok"}}),void $.ajax({url:"/tabledata/add/webservice",dataType:"json",success:function(e){$.unblockUI(),"ok"==e.say&&t(r,a)}}))}),$("#sample_2").on("click",".edit-row",function(a){a.preventDefault(),l&&(s?(r.fnDeleteRow(l),s=!1):e(r,l));var t=$(this).parents("tr")[0];n(r,t),l=t});var r=$("#sample_2").dataTable({aoColumnDefs:[{bSortable:!1,bSearchable:!1,aTargets:[-1,-2]}],oLanguage:{sLengthMenu:"Show _MENU_ Rows",sSearch:"",oPaginate:{sPrevious:"",sNext:""}},aaSorting:[[1,"asc"]],aLengthMenu:[[5,10,15,20,-1],[5,10,15,20,"All"]],iDisplayLength:10});$("#sample_2_wrapper .dataTables_filter input").addClass("form-control input-sm").attr("placeholder","Search"),$("#sample_2_wrapper .dataTables_length select").addClass("m-wrap small"),$("#sample_2_wrapper .dataTables_length select").select2(),$('#sample_2_column_toggler input[type="checkbox"]').change(function(){var e=parseInt($(this).attr("data-column")),a=r.fnSettings().aoColumns[e].bVisible;r.fnSetColumnVis(e,a?!1:!0)})};return{init:function(){e(),a()}}}();