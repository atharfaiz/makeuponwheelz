function eventL(){window.eventList=[],$.ajax({url:"/sgterp/protected/dateSheetList",type:"POST",success:function(e){var t=e.length;for($("#calendar").fullCalendar("removeEvents"),i=0;i<t;i++){titl=e[i].examName+"["+e[i].examId+"][MaxMarks:"+e[i].maxMarks+"]"+(0!=e[i].maxAssignMarks?"[MaxAssmntMarks:"+e[i].maxAssignMarks+"]":" ")+("Grade"==$("#marksGrade").val()?" [credit:"+e[i].credit+"]":" ");var a=new Date(e[i].startTime).getDay()+"";switch(a){case"0":window.eventList[eventList.length]={title:titl,start:e[i].startTime,end:e[i].endTime,className:"label-red",allDay:!1};break;case"1":window.eventList[eventList.length]={title:titl,start:e[i].startTime,end:e[i].endTime,className:"label-yellow",allDay:!1};break;case"2":window.eventList[eventList.length]={title:titl,start:e[i].startTime,end:e[i].endTime,className:"label-green",allDay:!1};break;case"3":window.eventList[eventList.length]={title:titl,start:e[i].startTime,end:e[i].endTime,className:"label-teal",allDay:!1};break;case"4":window.eventList[eventList.length]={title:titl,start:e[i].startTime,end:e[i].endTime,className:"label-purple",allDay:!1};break;case"5":window.eventList[eventList.length]={title:titl,start:e[i].startTime,end:e[i].endTime,className:"label-beige",allDay:!1};break;case"6":window.eventList[eventList.length]={title:titl,start:e[i].startTime,end:e[i].endTime,className:"label-orange",allDay:!1}}}limitCalendar(e,t),$("#calendar").fullCalendar("addEventSource",eventList)},error:function(e){alert(JSON.stringify(e))}})}function limitCalendar(e,t){for(startExam=new Date(e[0].startTime),endExam=new Date(e[0].endTime),j=0;j<t;j++)startTemp=new Date(e[j].startTime),endTemp=new Date(e[j].endTime),startExam>startTemp&&startExam.setTime(startTemp.getTime()),endExam<endTemp&&endExam.setTime(endTemp.getTime());$("#startExamDate").val(startExam),$("#endExamDate").val(endExam)}var eventList=[],Calendar=function(){var e=function(){$("#event-management");$("#event-categories div.event-category").each(function(){var e={title:$.trim($(this).text())};$(this).data("eventObject",e),$(this).draggable({zIndex:999,revert:!0,revertDuration:50})});{var e=new Date;e.getDate(),e.getMonth(),e.getFullYear(),$("#calendar").fullCalendar({buttonText:{prev:'<i class="fa fa-chevron-left"></i>',next:'<i class="fa fa-chevron-right"></i>'},header:{left:"prev next today",center:"title",right:"month,agendaWeek,agendaDay"},events:eventList,editable:!0,droppable:!0,drop:function(e,t){var a=$(this).data("eventObject"),i=$(this).attr("data-class"),n=$.extend({},a);n.start=e,n.allDay=t,i&&(n.className=[i]),$("#calendar").fullCalendar("renderEvent",n,!0),$("#drop-remove").is(":checked")&&$(this).remove()},selectable:!0,selectHelper:!0,select:function(e,t,a){eventL()},eventClick:function(e,t,a){eventL()}})}};return{init:function(){e()}}}();