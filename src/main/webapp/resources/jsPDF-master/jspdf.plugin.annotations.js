!function(t){"use strict";var n={annotations:[],f2:function(t){return t.toFixed(2)},notEmpty:function(t){return"undefined"!=typeof t&&""!=t?!0:void 0}};return jsPDF.API.annotationPlugin=n,jsPDF.API.events.push(["addPage",function(t){this.annotationPlugin.annotations[t.pageNumber]=[]}]),t.events.push(["putPage",function(t){for(var i=this.annotationPlugin.annotations[t.pageNumber],o=!1,e=0;e<i.length;e++){var s=i[e];if("link"===s.type&&(n.notEmpty(s.options.url)||n.notEmpty(s.options.pageNumber))){o=!0;break}}if(0!=o){this.internal.write("/Annots [");for(var a=this.annotationPlugin.f2,e=0;e<i.length;e++){var s=i[e],r=this.internal.scaleFactor,p=this.internal.pageSize.height,u="/Rect ["+a(s.x*r)+" "+a((p-s.y)*r)+" "+a(s.x+s.w*r)+" "+a(p-(s.y+s.h)*r)+"] ",h="";if(s.options.url)h="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+s.options.url+") >>";else if(s.options.pageNumber){var t=this.internal.getPageInfo(s.options.pageNumber);switch(h="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+t.objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":h+=" /Fit]";break;case"FitH":s.options.top=s.options.top||a(p*r),h+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,h+=" /FitV "+s.options.left+"]";break;case"XYZ":default:s.options.top=s.options.top||a(p*r),s.options.left=s.options.left||0,"undefined"==typeof s.options.zoom&&(s.options.zoom=0),h+=" /XYZ "+s.options.left+" "+s.options.top+" "+s.options.zoom+"]"}}""!=h&&(h+=" >>",this.internal.write(h))}this.internal.write("]")}}]),t.link=function(t,n,i,o,e){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:t,y:n,w:i,h:o,options:e,type:"link"})},t.textWithLink=function(t,n,i,o){var e=this.getTextWidth(t),s=this.internal.getLineHeight();return this.text(t,n,i),i+=.2*s,this.link(n,i-s,e,s,o),e},t.getTextWidth=function(t){var n=this.internal.getFontSize(),i=this.getStringUnitWidth(t)*n/this.internal.scaleFactor;return i},t.getLineHeight=function(){return this.internal.getLineHeight()},this}(jsPDF.API);